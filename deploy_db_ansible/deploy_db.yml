---
  - name: "CliXX DB Deployment Ansible Playbook"
    hosts: localhost
    connection: local
    gather_facts: false
    vars:
      ansible_python_interpreter: "{{ ansible_playbook_python }}"
      instance_id: wordpressdbclixxjenkins
      db_snapshot: wordpressdbclixx-ecs-snapshot
      security_group: sg-0359e3a7392989004
    tasks:
       - name: Restore DB from snapshot
         amazon.aws.rds_instance:
           db_instance_identifier: '{{ instance_id }}'
           db_snapshot_identifier: '{{ db_snapshot }}'
           db_instance_class: db.t3.small
           region: us-east-1
           state: present
           wait: yes
       - name: Modify to add SG
         amazon.aws.rds_instance:
           db_instance_identifier: '{{ instance_id }}'
           region: us-east-1
           vpc_security_group_ids:
             - '{{ security_group }}'
           state: present
           apply_immediately: true
